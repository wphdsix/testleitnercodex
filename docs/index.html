<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syst√®me Leitner - Gestion de Flashcards</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="mordor-2340048_1280.png">
    
    <script>
      // Fonction utilitaire pour √©viter le cache navigateur et CDN
      function getNoCacheUrl(url) {
          const separator = url.includes('?') ? '&' : '?';
          return `${url}${separator}t=${Date.now()}`;
      }

      async function fetchCsvFilesFromGitHub() {
        const owner = 'leitexper1';
        const repo = 'testleitnercodex';
        const branch = 'main';
        const folderPath = 'docs';
        const folderPrefix = folderPath.endsWith('/') ? folderPath : `${folderPath}/`;
    
        // Ajout du param√®tre timestamp pour √©viter le cache GitHub API
        const treeUrl = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1&t=${Date.now()}`;
        
        // Option 'no-store' pour forcer le navigateur √† ne pas utiliser son cache
        const response = await fetch(treeUrl, { cache: 'no-store' });
    
        if (!response.ok) {
          throw new Error(`Erreur API GitHub : ${response.status}`);
        }
    
        const payload = await response.json();
        if (!payload?.tree) {
          throw new Error('R√©ponse inattendue de l‚ÄôAPI GitHub.');
        }
    
        return payload.tree
          .filter(item => item.type === 'blob' && item.path.startsWith(folderPrefix) && item.path.endsWith('.csv'))
          .map(item => {
            const relativePath = item.path.substring(folderPrefix.length);
            const publicPath = item.path.startsWith('docs/') ? item.path.substring(5) : item.path;
            const encodedPath = item.path
              .split('/')
              .map(segment => encodeURIComponent(segment))
              .join('/');
            const downloadUrl = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${encodedPath}`;
    
            return {
              name: relativePath,
              publicPath,
              download_url: downloadUrl,
              source: 'github'
            };
          })
          .sort((a, b) => a.name.localeCompare(b.name, 'fr'));
      }
    
      async function fetchCsvFilesFromManifest() {
        const manifestCandidates = ['csv-files.json', 'csv_manifest.json', '__csv_manifest.json'];
    
        for (const manifestName of manifestCandidates) {
          try {
            // Timestamp anti-cache pour le fichier json local
            const response = await fetch(`${manifestName}?t=${Date.now()}`, { cache: 'no-store' });
            if (!response.ok) {
              continue;
            }
    
            const payload = await response.json();
            const entries = Array.isArray(payload)
              ? payload
              : Array.isArray(payload?.files)
                ? payload.files
                : [];
    
            const files = entries
              .map(entry => {
                if (typeof entry === 'string') {
                  return { name: entry, publicPath: entry };
                }
    
                const name = entry?.name || entry?.path || '';
                const publicPath = entry?.publicPath || entry?.path || entry?.name || '';
    
                return name && publicPath ? { name, publicPath } : null;
              })
              .filter(Boolean)
              .map(file => {
                let downloadUrl = '';
                try {
                  downloadUrl = new URL(file.publicPath, window.location.href).href;
                } catch (error) {
                  console.warn('Impossible de r√©soudre le chemin CSV local', file.publicPath, error);
                }
    
                return {
                  ...file,
                  download_url: downloadUrl,
                  source: 'manifest'
                };
              })
              .filter(file => !!file.download_url)
              .sort((a, b) => a.name.localeCompare(b.name, 'fr'));
    
            if (files.length > 0) {
              return files;
            }
          } catch (error) {
            console.warn(`Lecture du manifeste CSV local √©chou√©e (${manifestName})`, error);
          }
        }
    
        return [];
      }
    
      function mergeCsvFileLists(primary = [], secondary = []) {
        const merged = [];
        const seen = new Set();
    
        [...primary, ...secondary].forEach((file) => {
          const name = file?.name;
          if (!name || seen.has(name)) {
            return;
          }
          seen.add(name);
          merged.push(file);
        });
    
        return merged.sort((a, b) => a.name.localeCompare(b.name, 'fr'));
      }
    
      function areCsvListsDifferent(next = [], previous = []) {
        if (next.length !== previous.length) {
          return true;
        }
    
        const namesA = next.map(file => file.name).sort((a, b) => a.localeCompare(b, 'fr'));
        const namesB = previous.map(file => file.name).sort((a, b) => a.localeCompare(b, 'fr'));
    
        return namesA.some((name, index) => name !== namesB[index]);
      }
    
      function populateCsvSelect(select, csvFiles, { preferredName = null, source = 'github', preserveSelection = true } = {}) {
        if (!select) {
          return;
        }
    
        const files = Array.isArray(csvFiles)
          ? csvFiles.filter(file => !!file?.name)
          : [];
    
        const previousValue = preserveSelection
          ? (preferredName ?? select.value ?? null)
          : (preferredName ?? null);
        const selectedName = files.find(file => file.name === previousValue)?.name
          || files[0]?.name
          || '';
    
        // Utilisation de la fonction du main.js si disponible pour l'affichage group√©
        if (window.leitnerApp?.ui?.populateCSVSelector) {
          window.leitnerApp.ui.populateCSVSelector(files, { selectedName: selectedName || null });
        } else {
          // Fallback simple
          select.innerHTML = '';
          if (!files.length) {
            const emptyOption = document.createElement('option');
            emptyOption.value = '';
            emptyOption.textContent = 'Aucun fichier .csv trouv√©';
            emptyOption.disabled = true;
            select.appendChild(emptyOption);
          } else {
            files.forEach((file, index) => {
              const option = document.createElement('option');
              const name = file.name || file.publicPath || `csv-${index + 1}`;
              option.value = name;
              option.textContent = name;
              option.dataset.name = name;
              
              if (file.download_url) {
                // Important : on ajoute aussi le cache-buster √† l'URL de t√©l√©chargement du fichier
                option.dataset.downloadUrl = getNoCacheUrl(file.download_url);
              }
              if (file.publicPath) {
                option.dataset.publicPath = file.publicPath;
              }
              option.dataset.source = file.source || source || '';
              
              if (name === selectedName) {
                option.selected = true;
              }
              select.appendChild(option);
            });
          }
        }
    
        if (!files.length) {
          select.value = '';
          select.dataset.hasFiles = 'false';
        } else if (selectedName) {
          select.value = selectedName;
          select.dataset.hasFiles = 'true';
        }
    
        select.dataset.bootstrapSource = source;
    
        const detail = {
          files: files.map(file => ({ ...file })),
          source,
          selectedName: selectedName || null,
          timestamp: Date.now()
        };
    
        window.__leitnerCSVBootstrap = detail;
        window.dispatchEvent(new CustomEvent('leitner:csv-list-updated', { detail }));
      }
    
      async function loadCsvFiles({ preserveSelection = true } = {}) {
        const select = document.getElementById('csv-selector');
        if (!select) {
          return;
        }
    
        select.disabled = true;
        select.innerHTML = '<option value="">Recherche des fichiers...</option>';
    
        try {
          let githubFiles = [];
          let source = 'github';
    
          try {
            githubFiles = await fetchCsvFilesFromGitHub();
          } catch (error) {
            console.warn('Chargement via GitHub impossible, tentative avec le manifeste local.', error);
            source = 'manifest';
          }
    
          let manifestFiles = [];
    
          try {
            manifestFiles = await fetchCsvFilesFromManifest();
          } catch (error) {
            console.warn('Chargement du manifeste local impossible.', error);
          }
    
          const csvFiles = mergeCsvFileLists(githubFiles, manifestFiles);
    
          if (manifestFiles.length && !githubFiles.length) {
            source = 'manifest';
          } else if (manifestFiles.length && githubFiles.length) {
            source = 'mixed';
          }
    
          const preferredName = preserveSelection
            ? (select.value || window.__leitnerCSVBootstrap?.selectedName || null)
            : (window.__leitnerCSVBootstrap?.selectedName || null);
    
          populateCsvSelect(select, csvFiles, { preferredName, source, preserveSelection });
        } catch (err) {
          console.error('Impossible de charger les fichiers CSV :', err);
          select.innerHTML = '<option value="">Erreur de chargement</option>';
          return;
        } finally {
          const bs = window.__leitnerCSVBootstrap; 
          const hasFiles = bs && Array.isArray(bs.files) && bs.files.length > 0;
          select.disabled = !hasFiles;
        }
      }
    
      // D√©sactivation du watcher automatique qui pourrait cr√©er des conflits de cache
      // On pr√©f√®re un chargement explicite au d√©marrage
      
      document.addEventListener('DOMContentLoaded', () => {
        loadCsvFiles({ preserveSelection: false })
          .catch(error => console.error('Chargement initial des CSV √©chou√©', error));
      });
    
      function openImportExport() {
        const select = document.getElementById('csv-selector');
        const selectedOption = select?.selectedOptions?.[0];
        const selectedFile = selectedOption?.dataset?.downloadUrl
          || selectedOption?.dataset?.publicPath
          || selectedOption?.value;
    
        if (!selectedFile) {
          alert('Veuillez s√©lectionner un fichier CSV.');
          return;
        }
        const url = `import-export.html?csv=${encodeURIComponent(selectedFile)}`;
        window.open(url, '_blank', 'noopener,noreferrer');
      }
    </script>

<body class="site-background text-gray-800">
    <div class="container mx-auto max-w-6xl p-5">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">D√©monstration du syst√®me de Leitner</h1>
            <p class="text-gray-600">Apprentissage par r√©p√©tition espac√©e</p>
            <p class="text-gray-600">Par OM en 2025.09.03</p>            
        </header>

        <div class="beginner-guide-banner" role="region" aria-label="Guide pour d√©butant">
            <p class="beginner-guide-text">Besoin d'aide pour configurer votre GitHub&nbsp;? Suivez notre guide pas √† pas.</p>
            <button id="beginner-guide-btn" class="beginner-guide-button" type="button">
                üß≠ Guide pour d√©butant
            </button>
        </div>

        <div class="tab-container">
            <nav class="tab-nav" role="tablist" aria-label="Navigation principale">
                <button id="tab-review-trigger" class="tab-button" role="tab" aria-selected="false" aria-controls="tab-review" data-tab-target="review">
                    R√©vision
                </button>
                <button id="tab-packs-trigger" class="tab-button" role="tab" aria-selected="false" aria-controls="tab-packs" data-tab-target="packs">
                    Mes Paquets
                </button>
                <button id="tab-stats-trigger" class="tab-button" role="tab" aria-selected="false" aria-controls="tab-stats" data-tab-target="stats">
                    Statistiques
                </button>
                <button id="open-import-export" class="tab-button" type="button" data-action="open-import-export" aria-haspopup="dialog">
                    Import / Export avanc√©
                </button>
            </nav>
            
            <section id="tab-review" class="tab-panel space-y-6" role="tabpanel" aria-labelledby="tab-review-trigger" data-tab-panel="review">
                <div class="bg-white rounded-lg shadow-md p-5">
                    <div class="flex flex-wrap justify-between items-center mb-4">
                        <h2 class="text-xl font-bold mb-4 md:mb-0 w-full">Gestion des fichiers CSV</h2>
                        <p id="csv-load-status" class="mt-2 w-full text-sm text-green-600 hidden" role="status" aria-live="polite"></p>
                    </div>

                    <div class="mb-4 flex flex-col md:flex-row md:items-center gap-2 md:gap-4">
                        <select id="csv-selector" class="p-2 border rounded w-full md:min-w-[250px] md:max-w-[350px]">
                            <option value="">Chargement des fichiers...</option>
                        </select>
                    </div>
                </div>

                <div id="leitner-boxes" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                    </div>

                <div id="deck-overview-container" class="space-y-6">
                    </div>

                <div id="card-editor" class="hidden fixed inset-0 flex items-center justify-center p-5 z-50 bg-black bg-opacity-50" role="dialog" aria-modal="true" aria-labelledby="editor-title" aria-hidden="true">
                    <div class="bg-white rounded-xl shadow-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto" tabindex="-1">
                        <h3 class="text-xl font-bold mb-4" id="editor-title">Nouvelle carte</h3>
                        <form id="card-form" class="space-y-4">
                            <input type="hidden" id="card-id">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Question</label>
                                <textarea id="card-question" class="w-full p-2 border rounded" rows="3" required></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" for="card-question-image">Image question</label>
                                <div class="image-input-wrapper space-y-2">
                                    <div class="flex flex-col gap-2 md:flex-row md:items-start">
                                        <div class="flex flex-1 flex-wrap gap-2 md:flex-nowrap">
                                            <input type="text" id="card-question-image" class="flex-1 p-2 border rounded" placeholder="nom-du-fichier.jpg" aria-describedby="question-image-status">
                                            <input type="file" id="question-image-upload" class="hidden" accept="image/*">
                                            <button type="button" id="browse-question-image" class="bg-gray-200 px-3 rounded hover:bg-gray-300">Parcourir</button>
                                            <button type="button" id="clear-question-image" class="bg-red-100 text-red-600 px-3 rounded hover:bg-red-200">Retirer</button>
                                        </div>
                                        <div id="question-image-dropzone" class="image-dropzone" tabindex="0" role="button" aria-describedby="question-image-status">
                                            <span>Glissez-d√©posez, collez ou cliquez pour ajouter une image.</span>
                                        </div>
                                    </div>
                                    <p id="question-image-status" class="image-status">Aucune image s√©lectionn√©e.</p>
                                    <img id="question-image-preview" class="image-preview" alt="Pr√©visualisation de l'image question" aria-hidden="true">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">R√©ponse</label>
                                <textarea id="card-answer" class="w-full p-2 border rounded" rows="3" required></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1" for="card-answer-image">Image r√©ponse</label>
                                <div class="image-input-wrapper space-y-2">
                                    <div class="flex flex-col gap-2 md:flex-row md:items-start">
                                        <div class="flex flex-1 flex-wrap gap-2 md:flex-nowrap">
                                            <input type="text" id="card-answer-image" class="flex-1 p-2 border rounded" placeholder="nom-du-fichier.jpg" aria-describedby="answer-image-status">
                                            <input type="file" id="answer-image-upload" class="hidden" accept="image/*">
                                            <button type="button" id="browse-answer-image" class="bg-gray-200 px-3 rounded hover:bg-gray-300">Parcourir</button>
                                            <button type="button" id="clear-answer-image" class="bg-red-100 text-red-600 px-3 rounded hover:bg-red-200">Retirer</button>
                                        </div>
                                        <div id="answer-image-dropzone" class="image-dropzone" tabindex="0" role="button" aria-describedby="answer-image-status">
                                            <span>Glissez-d√©posez, collez ou cliquez pour ajouter une image.</span>
                                        </div>
                                    </div>
                                    <p id="answer-image-status" class="image-status">Aucune image s√©lectionn√©e.</p>
                                    <img id="answer-image-preview" class="image-preview" alt="Pr√©visualisation de l'image r√©ponse" aria-hidden="true">
                                </div>
                            </div>
                            <div class="flex justify-end gap-3 pt-4">
                                <button type="button" id="cancel-edit" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                                    Annuler
                                </button>
                                <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                    Sauvegarder
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="flashcard-container" class="hidden fixed inset-0 flex items-center justify-center p-5 z-50 bg-black bg-opacity-50" role="dialog" aria-modal="true" aria-labelledby="question-content" aria-hidden="true">
                    <div class="flashcard bg-white rounded-xl shadow-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto" tabindex="-1">
                        <div class="question-section bg-gray-50 rounded-lg p-4 mb-5">
                            <h3 class="font-bold text-lg mb-3">Question</h3>
                            <div id="question-content" class="text-lg my-4"></div>
                        </div>
                        <button id="show-answer-btn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 mb-5">
                            Voir la r√©ponse
                        </button>
                        <div id="answer-section" class="hidden bg-gray-100 rounded-lg p-4 mt-5">
                            <h3 class="font-bold text-lg mb-3">R√©ponse</h3>
                            <div id="answer-content" class="text-lg my-4"></div>
                            
                            <div class="mt-4 border-t pt-4">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Difficult√© ressentie :</label>
                                <div class="flex flex-wrap gap-4" id="difficulty-options">
                                    <label class="inline-flex items-center cursor-pointer bg-white px-3 py-2 rounded border hover:bg-gray-50">
                                        <input type="radio" name="difficulty" value="easy" class="w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500">
                                        <span class="ml-2 text-sm font-medium text-gray-700">Facile</span>
                                    </label>
                                    <label class="inline-flex items-center cursor-pointer bg-white px-3 py-2 rounded border hover:bg-gray-50">
                                        <input type="radio" id="difficulty-normal" name="difficulty" value="normal" class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                                        <span class="ml-2 text-sm font-medium text-gray-700">Normale</span>
                                    </label>
                                    <label class="inline-flex items-center cursor-pointer bg-white px-3 py-2 rounded border hover:bg-gray-50">
                                        <input type="radio" name="difficulty" value="hard" class="w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500">
                                        <span class="ml-2 text-sm font-medium text-gray-700">Difficile</span>
                                    </label>
                                </div>
                            </div>

                            <div class="flex flex-wrap gap-3 mt-6">
                                <button id="wrong-answer" class="flex-1 bg-red-500 text-white py-2 rounded-lg font-bold hover:bg-red-600">
                                    Faux
                                </button>
                                <button id="right-answer" class="flex-1 bg-green-500 text-white py-2 rounded-lg font-bold hover:bg-green-600">
                                    Vrai
                                </button>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between">
                            <button id="edit-card-btn" class="text-blue-600 hover:text-blue-800">
                                Modifier
                            </button>
                            <button id="delete-card-btn" class="text-red-600 hover:text-red-800">
                                Supprimer
                            </button>
                        </div>
                    </div>
                </div>

                <div class="admin-button" id="admin-button">
                    ‚öôÔ∏è
                </div>

                <div id="admin-panel" class="hidden fixed inset-0 flex items-center justify-center p-5 z-50 bg-black bg-opacity-50" role="dialog" aria-modal="true" aria-labelledby="admin-panel-title" aria-hidden="true" tabindex="-1">
                    <div class="bg-white rounded-xl shadow-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold" id="admin-panel-title">Param√®tres Administrateur</h3>
                            <button id="close-admin" class="text-gray-500 hover:text-gray-700 text-xl">
                                ‚úï
                            </button>
                        </div>

                        <div class="space-y-6">
                            <div class="github-config bg-gray-100 rounded-lg p-4">
                                <h4 class="font-bold text-lg mb-3">Configuration GitHub</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Propri√©taire du d√©p√¥t</label>
                                        <input type="text" id="repo-owner" class="w-full p-2 border rounded" placeholder="votre-nom-utilisateur">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Nom du d√©p√¥t</label>
                                        <input type="text" id="repo-name" class="w-full p-2 border rounded" placeholder="nom-du-d√©p√¥t">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Chemin du dossier (optionnel)</label>
                                        <input type="text" id="repo-path" class="w-full p-2 border rounded" placeholder="docs/">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Branche (optionnel)</label>
                                        <input type="text" id="repo-branch" class="w-full p-2 border rounded" placeholder="main">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Token d'acc√®s (optionnel)</label>
                                        <input type="password" id="github-token" class="w-full p-2 border rounded" placeholder="ghp_xxx">
                                        <p class="text-xs text-gray-500 mt-1">N√©cessaire seulement pour les d√©p√¥ts priv√©s</p>
                                    </div>
                                </div>
                                <div class="github-config__actions">
                                    <button id="load-github-csv" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                        Charger les fichiers depuis GitHub
                                    </button>
                                    <button id="open-github-guide" class="bg-slate-700 text-white px-4 py-2 rounded hover:bg-slate-800">
                                        üìò Explication du processus
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-packs" class="tab-panel hidden" role="tabpanel" aria-labelledby="tab-packs-trigger" data-tab-panel="packs">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold mb-2">Mes paquets</h2>
                    <p class="text-gray-600">La gestion d√©taill√©e des collections sera introduite lors des phases suivantes. Vous pouvez d√©j√† consulter vos cartes via l'onglet R√©vision.</p>
                </div>
            </section>

            <section id="tab-stats" class="tab-panel hidden" role="tabpanel" aria-labelledby="tab-stats-trigger" data-tab-panel="stats">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold mb-6">Tableau de bord</h2>

                    <div class="statistics-dashboard__summary mb-8">
                        <div class="progress-badge progress-badge--primary">
                            <span class="progress-badge__value" id="stat-total-reviewed">0</span>
                            <span class="progress-badge__label">Cartes r√©vis√©es aujourd'hui</span>
                        </div>
                        <div class="progress-badge progress-badge--success">
                            <span class="progress-badge__value" id="stat-success-rate">0%</span>
                            <span class="progress-badge__label">Taux de r√©ussite</span>
                        </div>
                        <div class="progress-badge progress-badge--warning">
                            <span class="progress-badge__value" id="stat-streak">0</span>
                            <span class="progress-badge__label">S√©rie actuelle</span>
                        </div>
                    </div>

                    <div class="statistics-dashboard__panel mb-8">
                        <h3 class="statistics-dashboard__panel-title mb-4">R√©partition par difficult√©</h3>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="p-3 bg-green-50 rounded-lg border border-green-200">
                                <span class="block text-2xl font-bold text-green-700" id="stat-count-easy">0</span>
                                <span class="text-xs text-green-600 uppercase font-semibold">Facile</span>
                            </div>
                            <div class="p-3 bg-blue-50 rounded-lg border border-blue-200">
                                <span class="block text-2xl font-bold text-blue-700" id="stat-count-normal">0</span>
                                <span class="text-xs text-blue-600 uppercase font-semibold">Normale</span>
                            </div>
                            <div class="p-3 bg-red-50 rounded-lg border border-red-200">
                                <span class="block text-2xl font-bold text-red-700" id="stat-count-hard">0</span>
                                <span class="text-xs text-red-600 uppercase font-semibold">Difficile</span>
                            </div>
                        </div>
                    </div>

                    <div class="statistics-dashboard__panel">
                        <div class="flex justify-between items-center mb-4 border-b pb-2">
                            <h3 class="text-lg font-bold text-gray-700">Historique des sessions</h3>
                            <button id="btn-clear-history" class="text-sm text-red-500 hover:text-red-700 underline cursor-pointer">
                                Effacer l'historique
                            </button>
                        </div>
                        <ul id="stats-history-list" class="stats-history max-h-64 overflow-y-auto">
                            <li class="p-4 text-center text-gray-500 italic">Aucune session termin√©e pour le moment.</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>

        <div id="import-export-modal" class="hidden import-export-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="import-export-title">
            <div class="import-export-modal__dialog" role="document">
                <div class="import-export-modal__header">
                    <h3 id="import-export-title">Import / Export des cartes</h3>
                    <button id="close-import-export" class="import-export-modal__close" aria-label="Fermer la fen√™tre Import/Export">‚úï</button>
                </div>
                <div class="import-export-modal__body">
                    <p class="import-export-modal__description">
                        G√©rez vos cartes directement dans ce tableau : modifiez les questions, images, r√©ponses ainsi que leur bo√Æte et la date de r√©vision.
                    </p>
                    <div id="csv-inline-editor" class="csv-inline-editor__wrapper" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <div id="github-guide-modal" class="hidden fixed inset-0 flex items-center justify-center p-5 z-50 bg-black bg-opacity-50" role="dialog" aria-modal="true" aria-labelledby="github-guide-title" aria-hidden="true" tabindex="-1">
            <div class="github-guide__dialog" role="document">
                <div class="github-guide__header">
                    <h3 id="github-guide-title" class="text-xl font-bold">Comprendre et configurer son GitHub personnel</h3>
                    <button id="close-github-guide" class="github-guide__close" aria-label="Fermer le guide">
                        ‚úï
                    </button>
                </div>
                <div class="github-guide__body">
                    <p class="github-guide__intro">
                        Ce guide d√©taille pas √† pas la cr√©ation de votre compte GitHub, la connexion, la r√©alisation d'un fork du projet et la configuration des champs ci-dessus. Chaque √©tape est pens√©e pour un public d√©butant : prenez votre temps, suivez l'ordre propos√© et ins√©rez vos propres captures dans les emplacements pr√©vus pour conserver un m√©mo visuel.
                    </p>
                    <footer class="github-guide__footer">
                        <p>Besoin d'un rappel rapide&nbsp;? Revenez √† tout moment sur ce guide en cliquant sur <strong>üìò Explication du processus</strong> dans la section de configuration.</p>
                    </footer>
                </div>
            </div>
        </div>

        <div id="statsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="stats-modal-title" aria-hidden="true">
            <div class="modal-content" role="document">
                <button type="button" class="close" data-action="close-stats" aria-label="Fermer la fen√™tre Statistiques">&times;</button>
                <h2 id="stats-modal-title" class="text-2xl font-bold mb-4">üìä Statistiques</h2>
            </div>
        </div>

    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="src/main.js"></script>
</body>
</html>